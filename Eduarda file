from bokeh.io import output_file, show
from bokeh.models import ColumnDataSource
from bokeh.plotting import figure
import pandas as pd


# Leitura do arquivo CSV
data = pd.read_csv("World Energy Consumption.csv")

# Filtrar os dados para o ano de 2020
df_filtered = data[data['year'] == 2020]

# Ordenar os valores da coluna 'wind_electricity' em ordem decrescente
df_sorted = df_filtered.sort_values('wind_electricity', ascending=False)

print(df_sorted)

# Selecionar os 10 maiores valores da coluna 'wind_electricity'
df_top_10 = df_sorted.head(10)

# Criar um ColumnDataSource com os dados organizados
data_organized = ColumnDataSource(df_top_10)

# Configurar a saída para um arquivo HTML
output_file("scatter_plot.html")

# Criar uma figura
p = figure(title="Maiores Valores de Wind Electricity em 2020", x_axis_label='País', y_axis_label='Wind Electricity')

# Plotar o gráfico de pontos
p.vbar('country', 'wind_electricity', source=data_organized)

# Rotacionar os rótulos do eixo x
p.xaxis.major_label_orientation = 1.2

# Mostrar o gráfico
show(p)
